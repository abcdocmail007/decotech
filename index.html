<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DecoTech | Premium Lifestyle Store</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

    <style>
        :root { 
            --primary: #004d40; --accent: #ff9800; --light: #f4f7f6; 
            --white: #ffffff; --success: #2ecc71; --text: #333;
            --card-border: #eee;
        }

        body.dark-mode { 
            --primary: #1de9b6; --light: #121212; --white: #1e1e1e; 
            --text: #e0e0e0; --card-border: #333;
        }

        body { font-family: 'Poppins', sans-serif; margin: 0; background: var(--light); color: var(--text); overflow-x: hidden; transition: 0.3s ease; }

        /* --- STICKY BAR CSS --- */
        .mobile-sticky-bar {
            position: fixed; bottom: 0; left: 0; width: 100%; background: var(--white);
            display: none; align-items: center; justify-content: space-between;
            padding: 12px 20px; box-shadow: 0 -5px 20px rgba(0,0,0,0.1); z-index: 2000; box-sizing: border-box;
        }
        .sticky-info { font-weight: 700; color: var(--primary); font-size: 16px; }
        .sticky-buy-btn {
            background: var(--accent); color: white; border: none; padding: 10px 25px;
            border-radius: 25px; font-weight: 700; cursor: pointer; font-size: 14px;
        }

        /* --- PRELOADER --- */
        #preloader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--white); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999; transition: 0.5s; }
        .loader-logo { font-size: 30px; font-weight: 800; color: var(--primary); margin-bottom: 15px; }
        .loader-logo span { color: var(--accent); }
        .loader-bar { width: 150px; height: 4px; background: #eee; border-radius: 10px; overflow: hidden; }
        .loader-progress { width: 0%; height: 100%; background: var(--primary); animation: load 2s forwards; }
        @keyframes load { 0% { width: 0%; } 100% { width: 100%; } }

        /* --- Navbar --- */
        nav { background: var(--white); padding: 10px 5%; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 2px 15px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1500; }
        .logo { font-size: 24px; font-weight: 700; color: var(--primary); text-decoration: none; }
        .logo span { color: var(--accent); }
        
        .nav-links { display: flex; align-items: center; gap: 20px; }
        .nav-links a, .dropbtn { text-decoration: none; color: var(--text); font-weight: 500; font-size: 15px; cursor: pointer; }
        
        /* Mobile Menu Toggle */
        .menu-toggle { display: none; font-size: 22px; cursor: pointer; color: var(--primary); }

        .dropdown { position: relative; }
        .dropdown-content { display: none; position: absolute; background: var(--white); min-width: 160px; box-shadow: 0 8px 16px rgba(0,0,0,0.1); border-radius: 8px; top: 100%; }
        .dropdown:hover .dropdown-content { display: block; }
        .dropdown-content a { padding: 12px 16px; border-bottom: 1px solid var(--card-border); display: block; }

        .nav-actions { display: flex; align-items: center; gap: 15px; }
        .search-container { position: relative; }
        .search-container input { padding: 8px 35px 8px 15px; border-radius: 20px; border: 1px solid #ddd; width: 150px; transition: 0.3s; background: var(--white); color: var(--text); }
        .search-container input:focus { width: 200px; border-color: var(--accent); }
        .search-container i { position: absolute; right: 12px; top: 10px; color: #888; }

        /* --- Hero Slider --- */
        .swiper { width: 100%; height: 500px; }
        .hero { height: 100%; background-size: cover; background-position: center; display: flex; align-items: center; color: white; padding: 0 10%; }
        .hero h1 { font-size: clamp(30px, 5vw, 55px); line-height: 1.1; margin: 0; }
        .hero p { font-size: clamp(14px, 2vw, 20px); margin: 20px 0; opacity: 0.9; }
        .hero-btn { background: var(--accent); color: white; padding: 12px 30px; border-radius: 30px; text-decoration: none; font-weight: 600; display: inline-block; }

        /* --- Trust Badges --- */
        .trust-badges { 
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;
            padding: 30px 5%; background: var(--white); margin: -30px auto 40px; 
            position: relative; z-index: 10; border-radius: 15px; max-width: 1000px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); 
        }
        .badge-item { text-align: center; }
        .badge-item i { font-size: 24px; color: var(--primary); }
        .badge-item p { margin: 5px 0 0; font-weight: 600; font-size: 13px; }
        .badge-item span { font-size: 10px; color: #888; display: block; }

        /* --- Products Grid --- */
        .section-title { text-align: center; margin: 40px 0; font-size: 28px; color: var(--primary); }
        .container { 
            max-width: 1200px; margin: 0 auto; padding: 0 20px;
            display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 25px; 
        }
        .card { background: var(--white); border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05); border: 1px solid var(--card-border); text-align: center; transition: 0.3s; }
        .card img { width: 100%; height: 200px; object-fit: cover; }
        .buy-btn { background: var(--primary); color: white; border: none; padding: 10px; border-radius: 25px; width: 90%; margin-bottom: 15px; cursor: pointer; }

        /* --- Reviews --- */
        .review-section { padding: 50px 5%; background: var(--white); margin-top: 50px; border-radius: 40px 40px 0 0; }
        .review-container { max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: 320px 1fr; gap: 40px; }
        .review-box { background: var(--light); padding: 25px; border-radius: 20px; height: fit-content; }
        #reviewList { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }

        /* --- WhatsApp Float --- */
        .whatsapp-float { position: fixed; bottom: 30px; right: 20px; background: #25d366; color: white; width: 55px; height: 55px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px; z-index: 1000; animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-10px);} }

        /* --- Footer --- */
        footer { background: var(--primary); color: white; padding: 50px 5% 20px; }
        .footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px; }
        .footer-bottom { border-top: 1px solid rgba(255,255,255,0.1); margin-top: 30px; padding-top: 20px; text-align: center; font-size: 12px; }

        /* --- TOAST --- */
        #toast-container { position: fixed; top: 80px; right: 20px; z-index: 9999; }
        .toast { background: var(--white); padding: 10px 20px; border-radius: 5px; margin-bottom: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border-left: 4px solid var(--success); transform: translateX(120%); transition: 0.3s; }
        .toast.show { transform: translateX(0); }

        /* --- RESPONSIVE MEDIA QUERIES --- */
        @media (max-width: 850px) {
            .nav-links { 
                position: fixed; top: 60px; left: -100%; width: 70%; height: 100vh; 
                background: var(--white); flex-direction: column; align-items: flex-start; 
                padding: 30px; transition: 0.4s; box-shadow: 5px 0 15px rgba(0,0,0,0.1); 
            }
            .nav-links.active { left: 0; }
            .menu-toggle { display: block; }
            .dropdown-content { position: static; box-shadow: none; padding-left: 20px; }
            .search-container input { width: 120px; }
            .search-container input:focus { width: 150px; }
            
            .review-container { grid-template-columns: 1fr; }
            .trust-badges { grid-template-columns: 1fr; margin-top: 20px; text-align: left; }
            .badge-item { display: flex; align-items: center; gap: 15px; }
            
            .mobile-sticky-bar { display: flex; }
            .whatsapp-float { bottom: 80px; }
            footer { padding-bottom: 80px; }
        }

        @media (max-width: 480px) {
            .container { grid-template-columns: repeat(2, 1fr); gap: 10px; padding: 0 10px; }
            .card h3 { font-size: 14px; }
            .price { font-size: 16px; }
            .card img { height: 150px; }
            .hero { padding: 0 5%; }
            .swiper { height: 350px; }
        }
    </style>
</head>
<body class="light-mode">

<div id="preloader">
    <div class="loader-logo">Deco<span>Tech</span></div>
    <div class="loader-bar"><div class="loader-progress"></div></div>
</div>

<div id="toast-container"></div>

<nav>
    <div class="menu-toggle" onclick="toggleMenu()"><i class="fas fa-bars"></i></div>
    <a href="index.html" class="logo">Deco<span>Tech</span></a>
    
    <div class="nav-links" id="navLinks">
        <a href="index.html">Home</a>
        <div class="dropdown">
            <span class="dropbtn">Shop <i class="fa fa-chevron-down" style="font-size: 10px;"></i></span>
            <div class="dropdown-content">
                <a href="gadgets.html">Gadgets</a>
                <a href="decor.html">Decor</a>
                <a href="clothing.html">Clothing</a>
            </div>
        </div>
        <a href="about.html">About</a>
        <a href="contact.html">Contact Us</a>
        <button id="modeBtn" style="background:none; border:none; color:var(--text); cursor:pointer;"><i class="fas fa-moon"></i></button>
    </div>

    <div class="nav-actions">
        <div class="search-container">
            <input type="text" id="mainSearch" placeholder="Search..." onkeyup="searchProduct()">
            <i class="fa fa-search"></i>
        </div>
        <a href="cart.html" style="color: var(--primary); font-size: 20px; position: relative; text-decoration: none;">
            <i class="fa fa-shopping-cart"></i>
            <span id="cartCount" style="position: absolute; top: -10px; right: -10px; background: var(--accent); color: white; font-size: 9px; padding: 2px 5px; border-radius: 50%;">0</span>
        </a>
    </div>
</nav>

<div class="swiper mySwiper">
    <div class="swiper-wrapper">
        <div class="swiper-slide">
            <div class="hero" style="background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1524758631624-e2822e304c36?auto=format&fit=crop&w=1350&q=80');">
                <div class="hero-content">
                    <h1>Elevate Your <br>Lifestyle Decor.</h1>
                    <p>Discover curated premium gadgets and home decor.</p>
                    <a href="gadgets.html" class="hero-btn">Shop Now <i class="fa fa-arrow-right"></i></a>
                </div>
            </div>
        </div>
        <div class="swiper-slide">
            <div class="hero" style="background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1550745165-9bc0b252726f?auto=format&fit=crop&w=1350&q=80');">
                <div class="hero-content">
                    <h1>New Tech <br>Arrivals 2026.</h1>
                    <p>Smart gadgets for your modern workspace.</p>
                    <a href="gadgets.html" class="hero-btn">Explore <i class="fa fa-arrow-right"></i></a>
                </div>
            </div>
        </div>
    </div>
    <div class="swiper-pagination"></div>
</div>

<div class="trust-badges">
    <div class="badge-item"><i class="fas fa-shipping-fast"></i><div><p>Free Shipping</p><span>Over ৳৫০০০</span></div></div>
    <div class="badge-item"><i class="fas fa-undo"></i><div><p>Easy Returns</p><span>7-day policy</span></div></div>
    <div class="badge-item"><i class="fas fa-shield-alt"></i><div><p>100% Secure</p><span>Secure payment</span></div></div>
</div>

<h2 class="section-title">Featured Collections</h2>
<div class="container" id="productList">
    <p style="text-align: center; grid-column: 1/-1;">Loading products...</p>
</div>

<section class="review-section">
    <div class="review-container">
        <div class="review-box">
            <h3>Feedback</h3>
            <div class="star-input" id="starInput" style="margin-bottom:15px; color:#ccc; cursor:pointer;">
                <i class="fa-solid fa-star" data-value="1"></i>
                <i class="fa-solid fa-star" data-value="2"></i>
                <i class="fa-solid fa-star" data-value="3"></i>
                <i class="fa-solid fa-star" data-value="4"></i>
                <i class="fa-solid fa-star" data-value="5"></i>
                <input type="hidden" id="selectedRating" value="5">
            </div>
            <input type="text" id="revName" placeholder="Name" style="width:100%; padding:10px; margin-bottom:10px; border-radius:10px; border:1px solid #ddd;">
            <textarea id="revText" placeholder="Your review..." rows="3" style="width:100%; padding:10px; margin-bottom:10px; border-radius:10px; border:1px solid #ddd;"></textarea>
            <button class="post-btn" onclick="addReview()" style="width:100%; background:var(--primary); color:white; border:none; padding:10px; border-radius:10px; font-weight:bold;">Post</button>
        </div>
        <div id="reviewList"></div>
    </div>
</section>

<div class="mobile-sticky-bar">
    <div class="sticky-info">৳ DecoTech Store</div>
    <button class="sticky-buy-btn" onclick="scrollToProducts()">Buy Now</button>
</div>

<a href="https://wa.me/8801778899326" class="whatsapp-float" target="_blank"><i class="fab fa-whatsapp"></i></a>

<footer>
    <div class="footer-grid">
        <div>
            <a href="#" class="logo" style="color:white">Deco<span>Tech</span></a>
            <p style="font-size:13px; opacity:0.8; margin-top:10px;">Your premium lifestyle destination.</p>
        </div>
        <div>
            <h4>Quick Links</h4>
            <a href="gadgets.html" style="color:white; display:block; font-size:14px; margin-bottom:5px;">Gadgets</a>
            <a href="decor.html" style="color:white; display:block; font-size:14px;">Decor</a>
        </div>
    </div>
    <div class="footer-bottom">
        &copy; 2026 DecoTech. All Rights Reserved. <br>
        <span id="liveClock"></span>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
    const apiURL = 'https://decotech-api.onrender.com/api/products';

    // Toggle Mobile Menu
    function toggleMenu() {
        document.getElementById('navLinks').classList.toggle('active');
    }

    window.addEventListener('load', () => {
        const preloader = document.getElementById('preloader');
        setTimeout(() => {
            preloader.style.opacity = '0';
            setTimeout(() => preloader.style.display = 'none', 500);
        }, 1000);
        fetchProducts();
        updateCartCount();
        displayStoredReviews();
    });

    var swiper = new Swiper(".mySwiper", {
        loop: true,
        autoplay: { delay: 4000 },
        pagination: { el: ".swiper-pagination", clickable: true },
    });

    async function fetchProducts() {
        try {
            const res = await fetch(apiURL);
            const products = await res.json();
            const list = document.getElementById('productList');
            list.innerHTML = products.slice(0, 8).map(p => `
                <div class="card">
                    <img src="${p.imageUrl || p.image || 'https://placehold.co/400x300'}" onerror="this.src='https://placehold.co/400x300'">
                    <div style="padding:10px">
                        <h3>${p.name}</h3>
                        <p class="price">৳ ${p.price}</p>
                        <button class="buy-btn" onclick="addToCart('${p.name}', ${p.price}, '${p.imageUrl || p.image}')">Add to Cart</button>
                    </div>
                </div>
            `).join('');
        } catch (err) {
            document.getElementById('productList').innerHTML = "<p>Error loading products.</p>";
        }
    }

    function addToCart(name, price, image) {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let item = cart.find(i => i.name === name);
        if(item) item.quantity++; else cart.push({name, price, image, quantity: 1});
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartCount();
        showToast("Added to cart!");
    }

    function updateCartCount() {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        document.getElementById('cartCount').innerText = cart.reduce((acc, curr) => acc + curr.quantity, 0);
    }

    function showToast(msg) {
        const container = document.getElementById('toast-container');
        const t = document.createElement('div');
        t.className = 'toast show';
        t.innerText = msg;
        container.appendChild(t);
        setTimeout(() => { t.classList.remove('show'); setTimeout(()=>t.remove(), 300); }, 2500);
    }

    // Star Rating Logic
    const stars = document.querySelectorAll('#starInput i');
    stars.forEach(star => {
        star.addEventListener('click', function() {
            const val = this.dataset.value;
            document.getElementById('selectedRating').value = val;
            stars.forEach(s => s.style.color = s.dataset.value <= val ? '#ff9800' : '#ccc');
        });
    });

    function addReview() {
        const name = document.getElementById('revName').value;
        const text = document.getElementById('revText').value;
        const rating = document.getElementById('selectedRating').value;
        if(name && text) {
            let reviews = JSON.parse(localStorage.getItem('customerReviews')) || [];
            reviews.unshift({name, text, rating, initials: name.substring(0,2).toUpperCase()});
            localStorage.setItem('customerReviews', JSON.stringify(reviews));
            displayStoredReviews();
            showToast("Review Posted!");
        }
    }

    function displayStoredReviews() {
        let reviews = JSON.parse(localStorage.getItem('customerReviews')) || [];
        const list = document.getElementById('reviewList');
        list.innerHTML = reviews.map(r => `
            <div style="background:var(--light); padding:15px; border-radius:15px; margin-bottom:10px;">
                <strong>${r.name} (${'★'.repeat(r.rating)})</strong>
                <p style="font-size:13px; margin:5px 0;">${r.text}</p>
            </div>
        `).join('') || '<p>No reviews yet.</p>';
    }

    function searchProduct() {
        let val = document.getElementById('mainSearch').value.toLowerCase();
        document.querySelectorAll('.card').forEach(c => {
            c.style.display = c.innerText.toLowerCase().includes(val) ? 'block' : 'none';
        });
    }

    function scrollToProducts() {
        document.getElementById('productList').scrollIntoView({behavior:'smooth'});
    }

    // Dark Mode
    const modeBtn = document.getElementById('modeBtn');
    modeBtn.addEventListener('click', () => {
        document.body.classList.toggle('dark-mode');
        modeBtn.innerHTML = document.body.classList.contains('dark-mode') ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
    });

    setInterval(() => {
        document.getElementById('liveClock').innerText = new Date().toLocaleString();
    }, 1000);
</script>
</body>
</html>
